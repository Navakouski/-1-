
Количество по событиям
SELECT 
	Событие,
	СобытиеПредставление,
	IDУровеньСобытия,
	УровеньСобытияПредставление,
	COUNT(RowId) AS Количество
  FROM 
  ПросмотрЗаписиДанных
  where 
  IDУровеньСобытия = 3 
  and 
  ИнформационнаяСистема = 1
  and
  Период > dateadd(month, -3, getdate())

  GROUP BY
	Событие,
	СобытиеПредставление,
	IDУровеньСобытия,
	УровеньСобытияПредставление
  ORDER BY
  COUNT(RowId) DESC
  
Количество по метаданным

SELECT 
	Метаданные,
	МетаданныеНаименование,
	IDУровеньСобытия,
	УровеньСобытияПредставление,
	COUNT(RowId) AS Количество
  FROM 
  ПросмотрЗаписиДанных
  where 
  IDУровеньСобытия = 3 
  and 
  ИнформационнаяСистема = 1
   and
  Период > dateadd(month, -3, getdate())
  GROUP BY
	Метаданные,
	МетаданныеНаименование,
	IDУровеньСобытия,
	УровеньСобытияПредставление
  ORDER BY
  COUNT(RowId) DESC
  
Количество по транзакциям

SELECT 
	СостояниеТранзакции,
	СостояниеТранзакцииПредставление,
	IDУровеньСобытия,
	УровеньСобытияПредставление,
	COUNT(RowId) AS Количество
  FROM 
  ПросмотрЗаписиДанных
  where 
  IDУровеньСобытия = 3 
  and 
  ИнформационнаяСистема = 1
   and
  Период > dateadd(month, -3, getdate())
  GROUP BY
	СостояниеТранзакции,
	СостояниеТранзакцииПредставление,
	IDУровеньСобытия,
	УровеньСобытияПредставление
  ORDER BY
  COUNT(RowId) DESC
  
Количество по идентификатору данных
  
  SELECT 
	ИдентификаторДанных,
	ПредставлениеДанных,
	IDУровеньСобытия,
	УровеньСобытияПредставление,
	COUNT(RowId) AS Количество
  FROM 
  ПросмотрЗаписиДанных
  where 
  IDУровеньСобытия = 3 
  and 
  ИнформационнаяСистема = 1
   and
  Период > dateadd(month, -3, getdate())
  GROUP BY
	ИдентификаторДанных,
	ПредставлениеДанных,
	IDУровеньСобытия,
	УровеньСобытияПредставление
  ORDER BY
  COUNT(RowId) DESC


Количество по данным 

SELECT 
	Данные,
	ИдентификаторДанных,
	ПредставлениеДанных,
	IDУровеньСобытия,
	УровеньСобытияПредставление,
	COUNT(RowId) AS Количество
  FROM 
  ПросмотрЗаписиДанных
   where 
  IDУровеньСобытия = 3 
  and 
  ИнформационнаяСистема = 1
   and
  Период > dateadd(month, -3, getdate())
  GROUP BY
	Данные,
	ИдентификаторДанных,
	ПредставлениеДанных,
	IDУровеньСобытия,
	УровеньСобытияПредставление
  ORDER BY
  COUNT(RowId) DESC
  
 Количество по комментарию
 
 SELECT 
	Комментарий,
	IDУровеньСобытия,
	УровеньСобытияПредставление,
	COUNT(RowId) AS Количество
  FROM 
  ПросмотрЗаписиДанных
    where 
  IDУровеньСобытия = 3 
  and 
  ИнформационнаяСистема = 1
   and
  Период > dateadd(month, -3, getdate())
  GROUP BY
	Комментарий,
	IDУровеньСобытия,
	УровеньСобытияПредставление
  ORDER BY
  COUNT(RowId) DESC
  
  
  
  Детальные записи 
  
  SELECT TOP (1000) [ИнформационнаяСистема]
      ,[ИнформационнаяСистемаНаименование]
      ,[ИнформационнаяСистемаОписание]
      ,[ИнформационнаяСистемаПредставление]
      ,[Период]
      ,[RowId]
      ,[IDУровеньСобытия]
      ,[УровеньСобытияПредставление]
      ,[УровеньСобытияИмя]
      ,[Соединение]
      ,[Сеанс]
      ,[СостояниеТранзакции]
      ,[СостояниеТранзакцииПредставление]
      ,[СостояниеТранзакцииИмя]
      ,[ПериодТранзакции]
      ,[ИдентификаторТранзакции]
      ,[Пользователь]
      ,[ПользовательНаименование]
      ,[ПользовательUUID]
      ,[Компьютер]
      ,[КомпьютерНаименование]
      ,[Метаданные]
      ,[МетаданныеНаименование]
      ,[МетаданныеИдентификаторДанных]
      ,[Данные]
      ,[ИдентификаторДанных]
      ,[ПредставлениеДанных]
      ,[Комментарий]
      ,[Приложение]
      ,[ПриложениеНаименование]
      ,[ПриложениеПредставление]
      ,[Событие]
      ,[СобытиеНаименование]
      ,[СобытиеПредставление]
      ,[РабочийСервер]
      ,[РабочийСерверНаименование]
      ,[ПервичныйПорт]
      ,[ПервичныйПортНаименование]
      ,[ДополнительныйПорт]
      ,[ДополнительныйПортНаименование]
  FROM [МояЗагрузка].[dbo].[ПросмотрЗаписиДанных]
  where 
  IDУровеньСобытия = 3 
  and 
  ИнформационнаяСистема = 1
  and
  Период > dateadd(month, -3, getdate())
  --and 
  --Событие = 15
  --and
  --Метаданные = 233
  --and
  --СостояниеТранзакции = 3
  --and
  --ИдентификаторДанных = '9c2c913115721385434d6229f25f94f8'
  --and
  --Данные = 'Выполнение отчета: Отчет.СреднийЧек'
  --and
  --Данные like '{%{"S","Узбекистан"},%{"S","1.0.1.1"}%'
  --and
  --Комментарий = 'Действие прервано системой защиты от опасных действий'
  --and
  --Комментарий Like '%{ОбщийМодуль.ирКэш.Модуль(1203)}:Если Истина%'
ORDER BY
RowId DESC